# Pinterest
## 1. Тема и целевая аудитория
### Тема
Pinterest  — социальный интернет-сервис, фотохостинг, позволяющий пользователям добавлять в режиме онлайн изображения [1].
### Целевая аудитория*
- Количество уникальных пользователей за день: около 31 миллиона [2]
- Среднее количество посещений сайта в месяц: 1.039 миллиарда
- Среднее время пребывания пользователя на сайте: 7 минут [3]
- Среднее количество страниц за посещение: 12

Таблица 1 - Распределение пользователей сайта по странам
| Страна   | Процент пользователей |
|----------|:---------------------:|
| США      | 22.44%                |
| Индия    | 8.17%                 |
| Бразилия | 7.98%                 |
| Россия   | 5.52%                 |
| Мексика  | 4.2%                  |

\* - данные за август 2024

### Ключевой функционал
+ Регистрация/авторизация
+ Просмотр ленты постов
+ Создание поста
+ Добавление постов в сохраненные
+ Подписка на пользователей
+ Просмотр пина
+ Поиск по теме поста [4]

### Ключевые продуктовые решения
- Бесконечная лента постов
- Рекомендации постов по интересам

### Список использованной литературы
[1. Pinterest - Wikipedia ](https://ru.wikipedia.org/wiki/Pinterest)

[2. Pinterest | HypeStat](https://hypestat.com/info/pinterest.com)

[3. Website Perfomance](https://pro.similarweb.com/#/digitalsuite/websiteanalysis/overview/website-performance/*/999/1m?webSource=Total&key=pinterest.com)

[4. Pinterest](https://ru.pinterest.com/)

## 2. Расчет нагрузки
### Продуктовые метрики
Таблица 2 - Количество пользователей за период
| Период                         | Количество уникальных пользователей      |
|:------------------------------:|:----------------------------------------:|
|Месяц                           | 363млн                                   |
|День                            | 34млн                                    |
**Пояснение:** данные взяты из [7].

Таблица 3 - Хранилища
| Тип хранилища | Средний размер |
|:-------------:|:--------------:|
|Пользователь   | 0.1 Гб         |

**Пояснение:** в данный момент в Pinterest насчитывается 240млрд пинов, то есть по 670 пинов на пользователя. Было выявлено, что на видео приходится 3% от количества всех пинов, то есть около 20 на каждого пользователя. Эмпирическим путём (после скачивания около 50 картинок, видео и аватарок) было выявлено, что средний вес картинки-пина - 100Кб, видео-пина - 2Мб, а аватарки пользователя - 50Кб. Таким образом, размер одного пользователя: 650 * 100Кб + 20 * 2Мб + 50Кб = 104Мб = 0.1 Гб. Данные взяты из [1].

Таблица 4 - Действия пользователя по типам
| Тип действия                                           | Среднее количество в день    |
|:------------------------------------------------------:|:----------------------------:|
|Подписка на пользователя                                | 37 млн                       |
|Просмотр ленты                                          | 38.83 млн                    |
|Поиск пина                                              | 166.7 млн                    |
|Создание пина                                           | 120 млн                      |
|Просмотр страницы конкретного пина                      | 138.7 млн                    |
|Авторизация/регистрация                                 | 38.83 млн                    |
|Добавление пина в сохраненные                           | 214.3 млн                    |

**Пояснение:** 
1) за последний месяц количество пользователей изменилось на 4млн. Если принимать, что процентное содержание пользователей по количества подписчиков остается константой, то по данным из [5] можно определить, что количество подписок за месяц составляет 1.1 млрд (если считать, что количество подписчиков у пользователя изменятся от середины предыдущего диапазона до середины следующего). Выходит, что за день среднее количество подписок на пользователей составляет 37 млн. Данные взяты из [1].
2) за месяц в Pinterest происходит 5млрд поисков пинов, то есть в день около 166.7 млн. Данные взяты из [1].
3) за месяц в Pinterest происходит около 1.16 млрд сессий, то есть в день около 38.7 млн. Учитывая, что авторизация происходит неявно (и +0.13 млн/день регистраций), то и авторизаций/регистраций составляет 38.83 млн. Данные взяты их [7].
4) по статистике, в неделю происходит 1.5 млрд добавлений пинов в сохранённые, то есть 214.3 млн в неделю. Данные взяты из [3].
5) по статистике, приведённой в [1], количество пользователей за последний месяц составляет 1.5% от суммы пользователей за все время службы Pinterest (Пример: за 1-ый месяц было 100 млн, за 2-ой - 200 млн, за 3-ий - 210 млн. Тогда за 3-ий месяц количество пользователей составляет 210 / (210 + 200 + 100) = 42%). Значит, считая, что количество создаваемых пинов зависит от количества пользователей за месяц, то можно положить, что количество созданных пинов за последний месяц 240 000 000 000 / 100 * 1.5 = 3 600 000 000. Значит, в день создаётся примерно 120 000 000 пинов. Данные взяты из [8].
6) за месяц в Pinterest происходит около 1.16 млрд сессий, в среднем за одну сессию пользователей посещает 12 страниц, то есть всего посещается 13.92 млрд страниц. 3.6 млрд из них уходит на создание пинов, 5 млрд - на поиск пинов, и ещё 1.16 млрд - на просмотр ленты (так как после неявной/явной авторизации/регистрации переход происходит на страницу ленты; будем предполагать, что пользователь за сессию посещает страницу ленты 1 раз, так как смысла перезагружать её нет, ведь она бесконечная). Таким образом получается, что на просмотр страницы конкретного пина выходит 13.92 - 5 - 3.6 - 1.16 = 4.16 млрд запросов в месяц, то есть в день 4.16 млрд / 30 = 138.7 млн.
7) так как в пункте 6 было принято, что просмотр ленты происходит 1 раз за сессию, то количество таких запросов столько же, сколько и авторизаций/регистраций, то есть 38.83 млн в день.


### Технические метрики
Таблица 5 - Типы хранилищ и их размеры
| Тип хранения                          |      Размер, Тб      |
|:-------------------------------------:|:--------------------:|
|Пользователи                           | 17.1 Тб              |
|Пины                                   | 35 414 Тб            |

**Пояснение:**
1) пользователей всего 363 млн, у каждого из них аватарка может весить в среднем 50Кб и есть текстовые данные (такие, как описание, имя и тд, которые составляют всего около 500 байт). Таким образом, суммарный размер пользователей: ~50.5Кб * 363 млн = 17.1 Тб.
2) пинов всего 240 млрд, средний вес картинок-пинов - 100Кб, средний вес видео-пинов - 2Мб. Процентаж видео-пинов = 0.3%, то есть их всего 7.2 млрд, а картинок-пинов соответственно - 232.8 млрд. Итого: 232 800 000 000 * 100Кб + 7 200 000 000 * 2Мб = 35 414 Тб.

Таблица 6 - Сетевые метрики
| Тип действия                                           | Пиковое потребление в течение суток, Гбит/с | Суммарный суточный, Гбайт/сутки | RPS (средний) | RPS (пиковый) |
|:------------------------------------------------------:|:-------------------------------------------:|:-------------------------------:|:-------------:|:-------------:|
|Подписка на пользователя                                | 0.003                                       |  91.7                           | 428           | 1 044         |+
|Просмотр ленты                                          | 21                                          |  723 632                        | 286           | 698           |
|Поиск пина                                              | 70.9                                        |  2 441 894                      | 1.93 тыс      | 4.71 тыс      |
|Создание пина                                           | 7.9                                         |  273 438                        | 162           | 395           |
|Просмотр пина                                           | 0.21                                        |  7 236                          | 4.3           | 10.5          |
|Авторизация/регистрация                                 | 1.1                                         |  41 229                         | 449           | 1 097         |+
|Добавление пина в сохраненные                           | 0.3                                         |  1 328                          | 2 480         | 6 051         |+

**Пояснение:** 
- Рассматриваются суммарный суточный трафик и средний RPS
  1. в среднем отписка/подписка на пользователя составляет 2.6 Кб сетевого трафика. Таким образом, за день получается 37 млн * 2.6 КБ = 91.7 Гб. Данные взяты из Chrome DevTools.
  2. за день происходит около 37 млн подписок, то есть в среднем за секунду - 37 млн / 86 400 = 428 запросов.
  3. в среднем авторизация/регистрация занимает 1.1 Мб сетевого трафика. Тогда, суммарный суточный трафик составляет 38.83 млн * 1.1 Мб = 41 229 Гб.
  4. за день происходит 38.83 млн авторизаций/регистраций, то есть 449 запросов в секунду.
  5. в среднем добавление пина в сохраненные занимает 6.5 Кб сетевого трафика, то есть в день около 6.5 Кб * 214.3 млн = 1 328 Гб.
  6. за день происходит 214.3 млн добавлений пина в сохраненные, то есть около 2 480 запросов в секунду.
- Рассматриваются пиковое потребление в течение суток и пиковый RPS
  По данным из [6] было определено, что на распределении по часовым поясам пик пользователей приходит на Америку - 95 млн, а среднее количество пользователей по всему миру - 38.9 млн. Таким образом, отношение пикового количества к среднему 95 / 38.9 = 2.44. Значит, отношение пикого RPS к среднему - 2.44.
  Тогда просчитаем соответсвующие пиковые RPS и пиковое потребление в течение суток.
  1. пиковый RPS подписок на пользователя 428 * 2.44 = 1 044
  2. тогда, учитывая трафики из предыдущего списка, пиковое потребление в течение суток составляет 1 044 * 2.6 Кб = 0.003 Гб.
  3. пиковый RPS просмотра ленты 286 * 2.44 = 698
  4. пиковый RPS поиска пина 1 930 * 2.44 = 4 710
  5. пиковый RPS создания пинов 

### Список использованной литературы
[1. Pinterest Statistics 2024 - TrueList](https://truelist.co/blog/pinterest-statistics/)

[2. 28 Pinterest Statistics That Marketers Must Know](https://www.demandsage.com/pinterest-statistics/)

[3. 44 Pinterest Statistics & Facts For 2024](https://www.searchenginejournal.com/pinterest-facts/370926/)

[4. Top Pinterest Influencers | Pinterest Wiki | Fandom](https://pinyourinterest.fandom.com/wiki/Top_Pinterest_Influencers)

[5. Instagram Followers - Everything You Need To Know](https://mention.com/en/reports/instagram/followers/)

[6. Countries With Most Pinterest Users](https://worldpopulationreview.com/country-rankings/pinterest-users-by-country)

[7. Pinterest | HypeStat](https://hypestat.com/info/pinterest.com)

[8. Pinterest Global MAU 2024 | Statista](https://www.statista.com/statistics/463353/pinterest-global-mau/)
